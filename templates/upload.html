{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h4><i class="fas fa-upload me-2"></i>Upload Research Paper</h4>
            </div>
            <div class="card-body">
                <form method="post" enctype="multipart/form-data" id="uploadForm">
                    <div class="upload-area" id="uploadArea" onclick="document.getElementById('fileInput').click()">
                        <i class="fas fa-cloud-upload-alt fa-3x text-primary mb-3"></i>
                        <h5>Click to upload or drag and drop</h5>
                        <p class="text-muted">PDF files only (max 16MB)</p>
                        <input type="file" id="fileInput" name="file" accept=".pdf" style="display: none;" required>
                    </div>
                    <div class="mt-3">
                        <button type="submit" class="btn btn-primary btn-lg w-100" id="submitBtn">
                            <i class="fas fa-magic me-2"></i>Upload & Analyze
                        </button>
                    </div>
                </form>
                
                <div class="mt-4">
                    <h6>What happens next?</h6>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check text-success me-2"></i>PDF content extraction</li>
                        <li><i class="fas fa-check text-success me-2"></i>AI-powered summarization</li>
                        <li><i class="fas fa-check text-success me-2"></i>Research gap analysis</li>
                        <li><i class="fas fa-check text-success me-2"></i>Key findings extraction</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.getElementById('fileInput').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (file) {
        const uploadArea = document.getElementById('uploadArea');
        // Don't replace the entire innerHTML, just update the content
        const icon = uploadArea.querySelector('i');
        const title = uploadArea.querySelector('h5');
        const subtitle = uploadArea.querySelector('p');
        
        // Update the elements
        icon.className = 'fas fa-file-pdf fa-3x text-success mb-3';
        title.textContent = file.name;
        subtitle.textContent = 'Ready to upload';
        subtitle.className = 'text-success';
    }
});

document.getElementById('uploadForm').addEventListener('submit', function(e) {
    const submitBtn = document.getElementById('submitBtn');
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Processing...';
    submitBtn.disabled = true;
});
</script>
{% endblock %}